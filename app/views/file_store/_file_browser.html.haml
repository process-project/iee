-# NOTE: requires target_path local setting which tells what directory it should list
- content_for :extra_head do
  :javascript
    var SletOverrides = {
      userLogin: '#{current_user.email}',
      userGroups: #{sanitize(current_user.all_groups.map(&:name).to_s)},
      webDavBaseUrl: '#{FileStore.file_store_url}/#{FileStore.file_store_path}/#{target_path}',
      webDavBaseHref: '#{FileStore.file_store_path}/#{target_path}',
      webDavAuthUrl: '/api/auth',
      policiesApiUrl: '#{FileStore.file_store_proxy_path}',
      token: '#{current_user.token}'
    };
    var fileStoreConfig = function() {
      valve.FileStore.setErrorCallback(function(message) {
        toastr.error(message);
      });
    };
  %script{ type: 'text/javascript', src: FileStore.file_store_js_path }

.x_panel
  .x_content
    #lobcderContainer
